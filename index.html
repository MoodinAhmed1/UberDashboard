<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Uber Admin Dashboard</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    rel="stylesheet"
  />

  <!-- Highcharts -->
    <script src="https://code.highcharts.com/highcharts.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Leaflet.js for Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>

  <style>
    body {
      background-color: #f4f6f9;
    }
    .sidebar {
      height: 100vh;
      background-color: #111;
      color: white;
      max-width: 250px;
      padding-top: 1rem;
    }
    .sidebar a {
      color: white;
      display: block;
      padding: 0.75rem 1rem;
      text-decoration: none;
    }
    .sidebar a:hover {
      background-color: #333;
    }
    .kpi-card {
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .content-area {
      margin-left: 250px;
      padding: 2rem;
    }
    .navbar {
      margin-left: 250px;
    }
    .chart-container {
      margin-bottom: 2rem;
    }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar position-fixed top-0 start-0 w-25">
    <h4 class="text-center">Uber Admin</h4>
    <a href="#">Dashboard</a>
    <a href="#">Drivers</a>
    <a href="#">Reports</a>
    <a href="#">Settings</a>
  </div>

  <!-- Top Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom">
    <div class="container-fluid">
      <span class="navbar-brand">Uber Dashboard</span>
      <div class="d-flex">
        <input type="date" class="form-control me-2" />
        <select class="form-select">
          <option selected>All Cities</option>
          <option>Addis Ababa</option>
          <option>Bahir Dar</option>
          <option>Hawassa</option>
        </select>
      </div>
    </div>
  </nav>

  <!-- Main Content Area -->
  <div class="content-area">
    <!-- KPI Cards Row -->
    <div class="row g-4 mb-4">
      <div class="col-md-4">
        <div class="card kpi-card p-3">
          <h5>Total Drivers</h5>
          <h2 id="driversCount">0</h2>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card kpi-card p-3">
          <h5>Active Today</h5>
          <h2 id="activeDrivers">0</h2>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card kpi-card p-3">
          <h5>Total Rides</h5>
          <h2 id="totalRides">0</h2>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card kpi-card p-3">
          <h5>Revenue</h5>
          <h2 id="totalRevenue">$0</h2>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card kpi-card p-3">
          <h5>Avg Rating</h5>
          <h2 id="avgRating">0</h2>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card kpi-card p-3">
          <h5>Complaints</h5>
          <h2 id="complaintsCount">0</h2>
        </div>
      </div>
    </div>

    <!-- Chart Placeholders -->
    <div class="row">
      <div class="col-lg-6 chart-container">
        <div class="card p-3">
          <h5>Revenue Over Time</h5>
          <div id="revenueChart"></div>
        </div>
      </div>
      <div class="col-lg-6 chart-container">
        <div class="card p-3">
          <h5>Drivers Per City</h5>
          <div id="driversChart"></div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-6 chart-container">
        <div class="card p-3">
          <h5>Rating Breakdown</h5>
          <canvas id="ratingChart"></canvas>
        </div>
      </div>
      <div class="col-lg-6 chart-container">
        <div class="card p-3">
          <h5>Ride Density Map</h5>
          <div id="heatmap" style="height: 300px;"></div>
        </div>
      </div>
    </div>

    <!-- Activity Feed -->
    <div class="card mt-4">
      <div class="card-header">Real-Time Activity Feed</div>
      <ul class="list-group list-group-flush" id="activityFeed"></ul>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

 <script>
    document.addEventListener("DOMContentLoaded", () => {
    const kpiData = {
        driversCount: 12500,
        activeDrivers: 3200,
        totalRides: 42000,
        totalRevenue: 1230000,
        avgRating: 4.8,
        complaintsCount: 35,
    };

    const animateCounter = (id, target, prefix = "", decimal = false) => {
        const el = document.getElementById(id);
        let current = 0;
        const increment = target / 120; // 120 frames ~ 2 sec
        const interval = setInterval(() => {
        current += increment;
        if (current >= target) {
            current = target;
            clearInterval(interval);
        }
        el.textContent = prefix + (decimal ? current.toFixed(1) : Math.floor(current).toLocaleString());
        }, 16);
    };

    animateCounter("driversCount", kpiData.driversCount);
    animateCounter("activeDrivers", kpiData.activeDrivers);
    animateCounter("totalRides", kpiData.totalRides);
    animateCounter("totalRevenue", kpiData.totalRevenue, "$");
    animateCounter("avgRating", kpiData.avgRating, "", true);
    animateCounter("complaintsCount", kpiData.complaintsCount);
    });

    Highcharts.chart('revenueChart', {
        chart: { type: 'line' },
        title: { text: '' },
        xAxis: { categories: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'] },
        yAxis: { title: { text: 'Revenue ($)' } },
        series: [{
            name: 'Revenue',
            data: [150000, 180000, 200000, 170000, 220000, 250000, 230000]
        }]
    });

    Highcharts.chart('driversChart', {
        chart: { type: 'column' },
        title: { text: '' },
        xAxis: {
            categories: ['Addis Ababa', 'Hawassa', 'Bahir Dar', 'Dire Dawa'],
            title: { text: 'Cities' }
        },
        yAxis: {
            min: 0,
            title: { text: 'Number of Drivers' }
        },
        series: [{
            name: 'Drivers',
            data: [5200, 1400, 900, 1100]
        }]
    });

    const ctx = document.getElementById('ratingChart').getContext('2d');
    new Chart(ctx, {
        type: 'pie',
        data: {
        labels: ['5 Stars', '4 Stars', '3 Stars', '2 Stars', '1 Star'],
        datasets: [{
            data: [65, 20, 8, 4, 3],
            backgroundColor: ['#4caf50', '#8bc34a', '#ffc107', '#ff9800', '#f44336']
        }]
        }
    });

    const map = L.map('heatmap').setView([9.03, 38.74], 12);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18
    }).addTo(map);

    // Fake ride locations for demonstration
    const rideLocations = [
        [9.03, 38.74], [9.05, 38.75], [9.02, 38.73], [9.01, 38.76], [9.04, 38.74]
    ];

    rideLocations.forEach(loc => {
        L.circle(loc, {
            radius: 150,
            color: 'red',
            fillColor: '#f03',
            fillOpacity: 0.5
        }).addTo(map);
    });

</script>

</body>
</html>
